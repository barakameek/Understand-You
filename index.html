<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Persona Alchemy Lab</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container lab-theme"> {/* Added theme class */}

        <!-- === Welcome Screen === -->
        <div id="welcomeScreen" class="screen current">
            <h1>Welcome to the Persona Alchemy Lab!</h1>
            <p>Discover your sexual persona by exploring the 6 core Elements.</p>
            <button id="startGuidedButton" class="button">Begin Experimentation</button>
        </div>

        <!-- === Questionnaire Screen (Element Focused) === -->
        <div id="questionnaireScreen" class="screen hidden">
            <header>
                <div id="elementProgressHeader" class="element-progress-header"></div>
                <p id="progressText">Element 1 / 6: [Element Name]</p>
                <div id="dynamicScoreFeedback">
                    Current <span id="feedbackElement">Element</span> Score: <span id="feedbackScore">5.0</span>
                    <div class="score-bar-container"><div id="feedbackScoreBar" style="width: 50%;"></div></div>
                </div>
            </header>
            <main id="questionContent">
                <!-- Element Title, Explanation, and Questions Loaded Here -->
            </main>
            <footer>
                <button id="prevElementButton" class="button back-button hidden">Previous Element</button>
                <button id="nextElementButton" class="button next-button">Next Element / Enter Lab</button>
            </footer>
        </div>

        <!-- === Main Lab Screen === -->
        <div id="labScreen" class="screen hidden">
            <div class="lab-layout-container">
                <!-- Left Panel: Ingredient Shelf (Elements) -->
                <div class="ingredient-shelf">
                    <h2>Your Elements</h2>
                    <p>Select 1 or 2 elements to combine:</p>
                    <div id="elementVials">
                        <!-- Element Vials Loaded Here -->
                    </div>
                     <button id="clearSelectionButton" class="button small-button back-button hidden">Clear Selection</button>
                     <button id="restartButton" class="button small-button back-button">Restart Setup</button>
                </div>

                <!-- Right Panel: Experiment Results -->
                <div class="results-bench">
                    <h2>Experiment Results</h2>
                    <p id="resultsInstruction">Select elements on the left to see resulting concepts.</p>
                    <div id="conceptResults" class="concept-results-grid">
                        <!-- Concept "Potions" Loaded Here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- === Concept Detail Pop-up (Recipe View) === -->
        <div id="conceptDetailPopup" class="popup hidden lab-popup">
             <button id="closePopupButton" class="close-button">Ã—</button>
             <h3 id="popupConceptName">Concept Name</h3>
             <p id="popupConceptType">Concept Type</p>
             <div class="recipe-view">
                 <h4>Elemental Recipe</h4>
                 <div id="popupConceptProfile">
                     <!-- Concept's Element Scores (Recipe) Loaded Here -->
                 </div>
             </div>
        </div>
         <div id="popupOverlay" class="overlay hidden"></div>

    </div>

    <!-- Data File -->
    <script src="data.js"></script>
    <!-- Main Application Logic -->
    <script src="script.js"></script>
</body>
</html>
